# Next.js Route Groups - () 폴더 사용법 가이드

## 개요
Next.js 13+ App Router에서 `()` 괄호로 감싼 폴더는 **Route Groups**라고 불리며, URL 경로에 영향을 주지 않으면서 라우트를 논리적으로 그룹화할 수 있는 기능입니다.

## 기본 개념

### Route Groups란?
- 폴더명을 `(그룹명)` 형태로 작성하면 해당 폴더는 URL 경로에서 제외됩니다
- 라우트를 논리적으로 구성하고 관리하기 위한 조직화 도구입니다
- 레이아웃, 메타데이터, 기타 설정을 그룹별로 적용할 수 있습니다

### 기본 구조 예시
```
app/
├── (marketing)/
│   ├── about/
│   │   └── page.tsx          # /about
│   └── contact/
│       └── page.tsx          # /contact
├── (shop)/
│   ├── products/
│   │   └── page.tsx          # /products
│   └── cart/
│       └── page.tsx          # /cart
└── page.tsx                  # /
```

## 주요 사용 사례

### 1. 레이아웃 분리
서로 다른 레이아웃을 적용하고 싶은 페이지들을 그룹화:

```
app/
├── (auth)/
│   ├── layout.tsx            # 인증 페이지용 레이아웃
│   ├── login/
│   │   └── page.tsx          # /login
│   └── register/
│       └── page.tsx          # /register
├── (dashboard)/
│   ├── layout.tsx            # 대시보드용 레이아웃
│   ├── analytics/
│   │   └── page.tsx          # /analytics
│   └── settings/
│       └── page.tsx          # /settings
└── layout.tsx                # 루트 레이아웃
```

### 2. 기능별 그룹화
관련된 기능들을 논리적으로 그룹화:

```
app/
├── (admin)/
│   ├── users/
│   │   └── page.tsx          # /users
│   └── reports/
│       └── page.tsx          # /reports
├── (public)/
│   ├── blog/
│   │   └── page.tsx          # /blog
│   └── docs/
│       └── page.tsx          # /docs
```

### 3. 조건부 레이아웃
특정 조건에 따라 다른 레이아웃 적용:

```
app/
├── (mobile)/
│   ├── layout.tsx            # 모바일 전용 레이아웃
│   └── home/
│       └── page.tsx          # /home
├── (desktop)/
│   ├── layout.tsx            # 데스크톱 전용 레이아웃
│   └── home/
│       └── page.tsx          # /home (같은 경로, 다른 레이아웃)
```

## 실제 구현 예시

### 인증 그룹 레이아웃
```typescript
// app/(auth)/layout.tsx
export default function AuthLayout({
  children,
}: {
  children: React.ReactNode
}) {
  return (
    <div className="min-h-screen flex items-center justify-center bg-gray-50">
      <div className="max-w-md w-full space-y-8">
        <div className="text-center">
          <h1 className="text-3xl font-bold">인증</h1>
        </div>
        {children}
      </div>
    </div>
  )
}
```

### 대시보드 그룹 레이아웃
```typescript
// app/(dashboard)/layout.tsx
import Sidebar from '@/components/Sidebar'
import Header from '@/components/Header'

export default function DashboardLayout({
  children,
}: {
  children: React.ReactNode
}) {
  return (
    <div className="flex h-screen">
      <Sidebar />
      <div className="flex-1 flex flex-col">
        <Header />
        <main className="flex-1 p-6">
          {children}
        </main>
      </div>
    </div>
  )
}
```

## 고급 활용법

### 1. 중첩 Route Groups
```
app/
├── (marketing)/
│   ├── (landing)/
│   │   ├── home/
│   │   │   └── page.tsx      # /home
│   │   └── features/
│   │       └── page.tsx      # /features
│   └── (content)/
│       ├── blog/
│       │   └── page.tsx      # /blog
│       └── docs/
│           └── page.tsx      # /docs
```

### 2. 메타데이터 그룹화
```typescript
// app/(marketing)/layout.tsx
import { Metadata } from 'next'

export const metadata: Metadata = {
  title: {
    template: '%s | 마케팅',
    default: '마케팅',
  },
  description: '마케팅 페이지입니다',
}

export default function MarketingLayout({
  children,
}: {
  children: React.ReactNode
}) {
  return (
    <div className="marketing-layout">
      {children}
    </div>
  )
}
```

### 3. 미들웨어와 함께 사용
```typescript
// middleware.ts
import { NextResponse } from 'next/server'
import type { NextRequest } from 'next/server'

export function middleware(request: NextRequest) {
  // (admin) 그룹의 페이지들에 대한 인증 체크
  if (request.nextUrl.pathname.startsWith('/admin')) {
    // 인증 로직
  }
  
  // (api) 그룹의 API 라우트들에 대한 처리
  if (request.nextUrl.pathname.startsWith('/api')) {
    // API 처리 로직
  }
  
  return NextResponse.next()
}
```

## 주의사항

### 1. URL 경로에 영향 없음
- `(marketing)/about/page.tsx` → `/about` (marketing은 URL에 나타나지 않음)
- Route Groups는 순전히 조직화 목적입니다

### 2. 같은 경로 충돌 방지
```
app/
├── (group1)/
│   └── about/
│       └── page.tsx          # /about
└── (group2)/
    └── about/
        └── page.tsx          # /about (충돌 발생!)
```

### 3. 레이아웃 상속
- Route Groups의 layout.tsx는 해당 그룹 내의 페이지들에만 적용됩니다
- 루트 layout.tsx는 모든 페이지에 적용됩니다

## 실제 프로젝트 적용 예시

### HR 관리 시스템에서의 활용
```
app/
├── (auth)/
│   ├── layout.tsx            # 로그인/회원가입 레이아웃
│   ├── login/
│   │   └── page.tsx          # /login
│   └── register/
│       └── page.tsx          # /register
├── (admin)/
│   ├── layout.tsx            # 관리자 전용 레이아웃
│   ├── employees/
│   │   └── page.tsx          # /employees
│   ├── payroll/
│   │   └── page.tsx          # /payroll
│   └── reports/
│       └── page.tsx          # /reports
├── (employee)/
│   ├── layout.tsx            # 직원 전용 레이아웃
│   ├── profile/
│   │   └── page.tsx          # /profile
│   └── schedule/
│       └── page.tsx          # /schedule
└── (public)/
    ├── about/
    │   └── page.tsx          # /about
    └── contact/
        └── page.tsx          # /contact
```

## 베스트 프랙티스

### 1. 명확한 그룹명 사용
- `(auth)` - 인증 관련
- `(admin)` - 관리자 기능
- `(public)` - 공개 페이지
- `(api)` - API 라우트

### 2. 레이아웃 최적화
- 각 그룹별로 필요한 레이아웃만 적용
- 공통 요소는 루트 레이아웃에 배치

### 3. 폴더 구조 일관성
- 프로젝트 전체에서 일관된 그룹 명명 규칙 사용
- 기능별, 권한별, 또는 레이아웃별로 명확하게 구분

### 4. 문서화
- 각 Route Group의 목적과 사용법을 문서화
- 팀원들이 쉽게 이해할 수 있도록 가이드 제공

## 결론
Route Groups는 Next.js App Router의 강력한 기능으로, 복잡한 애플리케이션의 라우트를 효율적으로 관리할 수 있게 해줍니다. URL 구조를 깔끔하게 유지하면서도 코드의 조직화와 유지보수성을 크게 향상시킬 수 있습니다.
