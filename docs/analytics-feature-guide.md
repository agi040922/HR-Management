# AI 급여 & 스케줄 분석 기능 가이드

## 개요

Gemini AI를 활용한 급여 및 스케줄 분석 시스템이 추가되었습니다. 이 기능은 현재 급여 구조와 스케줄을 종합적으로 분석하여 최적화 방안을 제안합니다.

## 주요 기능

### 1. AI 분석 시스템
- **Gemini AI 연동**: Google의 최신 생성형 AI 모델 활용
- **종합 분석**: 급여, 스케줄, 예외사항을 통합 분석
- **실시간 제안**: 현재 상황에 맞는 맞춤형 최적화 방안 제공

### 2. 분석 영역

#### 급여 최적화
- 2025년 최저시급(10,030원) 기준 준수 여부 확인
- 주휴수당 계산의 적정성 검토
- 4대보험료 계산 정확성 검증
- 야간근무수당 및 연장근무수당 적정성 분석

#### 스케줄 효율성
- 근무 스케줄의 효율성 평가
- 인력 배치 최적화 방안 제안
- 예외사항으로 인한 영향 분석

#### 법적 준수사항
- 한국 노동법 기준 준수 여부 확인
- 위험 요소 사전 식별
- 개선 방안 제안

#### 비용 분석
- 사업주 입장에서의 총 비용 분석
- 비용 절감 방안 제안
- ROI 최적화 전략

### 3. 분석 결과 제공

#### 분석 요약
- 전체적인 현황 요약
- 주요 이슈 및 기회 요소 식별

#### 추천사항
- 우선순위별 개선 방안
- 카테고리별 분류 (비용/스케줄/준수/효율성)
- 실행 가능한 구체적 제안

#### 상세 인사이트
- 영역별 심층 분석 결과
- 데이터 기반 인사이트 제공

#### 실행 계획
- 구체적인 액션 아이템
- 권장 완료 기한
- 예상 효과

## 사용 방법

### 1. 환경 설정

#### Gemini API 키 발급
1. [Google AI Studio](https://aistudio.google.com/apikey)에서 API 키 발급
2. `.env.local` 파일에 API 키 추가:
```env
NEXT_PUBLIC_GEMINI_API_KEY=your_api_key_here
```

#### 패키지 설치
```bash
pnpm install
```

### 2. 페이지 접근
- 사이드바 > 급여대장 > 급여 분석
- 또는 직접 URL: `/analytics`

### 3. 분석 실행
1. 분석할 스토어 선택
2. "AI 분석 시작" 버튼 클릭
3. 약 30초 후 분석 결과 확인

### 4. 결과 활용
- 탭별로 구분된 분석 결과 확인
- 우선순위에 따른 개선사항 실행
- 정기적인 재분석을 통한 지속적 최적화

## 기술 구조

### API 구조
```
lib/api/(page)/analytics/
├── gemini-api.ts          # Gemini AI 연동 API
```

### 페이지 구조
```
app/analytics/
├── page.tsx               # 메인 분석 페이지
```

### 주요 컴포넌트
- **분석 대시보드**: 전체 분석 결과 표시
- **탭 기반 UI**: 요약/추천/인사이트/실행계획 구분
- **실시간 상태 표시**: 분석 진행 상황 표시
- **반응형 디자인**: 모바일/데스크톱 지원

## 데이터 흐름

1. **데이터 수집**
   - 직원 정보 (급여, 근무시간, 직책)
   - 급여 계산 결과 (세전/세후/사업주 부담)
   - 예외사항 (이번 주 기준)
   - 스케줄 템플릿

2. **AI 분석**
   - Gemini AI에 구조화된 데이터 전송
   - 한국 노동법 기준 분석 요청
   - JSON 형태 분석 결과 수신

3. **결과 표시**
   - 사용자 친화적 UI로 결과 표시
   - 카테고리별/우선순위별 분류
   - 실행 가능한 액션 아이템 제공

## 보안 및 개인정보

- API 키는 환경변수로 관리
- 개인정보는 분석 후 즉시 삭제
- 분석 결과만 클라이언트에 전송
- HTTPS 통신으로 데이터 보호

## 향후 개선 계획

- [ ] 분석 결과 히스토리 저장
- [ ] 정기 자동 분석 스케줄링
- [ ] 더 세분화된 분석 카테고리
- [ ] 업종별 맞춤 분석
- [ ] 분석 결과 PDF 내보내기

## 문제 해결

### 일반적인 문제
1. **API 키 오류**: `.env.local` 파일의 API 키 확인
2. **분석 실패**: 네트워크 연결 및 API 할당량 확인
3. **데이터 없음**: 스토어 및 직원 데이터 등록 확인

### 지원
- 기술 문의: 개발팀 연락
- 기능 제안: GitHub Issues 활용
